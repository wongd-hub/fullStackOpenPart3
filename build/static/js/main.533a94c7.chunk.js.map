{"version":3,"sources":["services/persons.js","App.js","reportWebVitals.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","props","value","filter","onChange","changeFilterHandler","AddNewPerson","onSubmit","submitHandler","newName","changeHandler","newNumber","changeNumberHandler","type","Message","message","style","App","useState","name","number","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","personService","personsToShow","per","toLowerCase","includes","event","target","preventDefault","map","window","confirm","el","indexOf","idx","border","color","marginBottom","setTimeout","catch","error","onClick","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.533a94c7.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then(response => response.data);\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then(response => response.data);\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request.then(response => response.data);\n}\n\nconst handleDelete = (id) => {\n    return (\n        axios\n            .delete(`${baseUrl}/${id}`)\n    )\n}\n\nexport default {\n    getAll,\n    create,\n    update,\n    handleDelete\n}","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\n\nconst Filter = (props) => <form>filter shown with: <input value={props.filter} onChange={props.changeFilterHandler} /></form>\n\nconst AddNewPerson = (props) => {\n  return (\n    <form onSubmit={props.submitHandler}>\n      <h2>Add a new contact</h2>\n      <div>\n        name: <input value={props.newName} onChange={props.changeHandler} />\n        <br />\n        number: <input value={props.newNumber} onChange={props.changeNumberHandler} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Message = ({ message, style }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={style}>\n      <p>{message}</p>\n    </div> \n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([{ name: 'Arto Hellas', number: '040-1234567' }]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState({\n    message: null,\n    style: null\n  });\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })\n  }, [])\n\n  // Handler for name change\n  const changeHandler = (event) => setNewName(event.target.value)\n\n  // Handler for number change\n  const changeNumberHandler = (event) => setNewNumber(event.target.value)\n\n  // Handler for filter change\n  const changeFilterHandler = (event) => setFilter(event.target.value)\n\n  // Handle form submission\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    if (persons.map(per => per.name).includes(newName)) {\n      const userConfirm = window.confirm(`${newName} is already in the phonebook, replace the old number with a new one?`);\n      // const id = persons.map(per => per.name).indexOf(newName) + 1;\n      // The above code doesn't always work, trying a more sophisticated way of pulling the id of the replaced name...\n\n      if (userConfirm) {\n        personService\n          .getAll()\n          // ... Return array of names in order, then get index of the one that matches\n          .then(response => response.map(el => el.name).indexOf(newName))\n          // Then query for object at index that was output previously and grab id\n          .then(idx => personService\n              .getAll()\n              .then(response => response[idx].id)\n          )\n          // Once the index is confirmed, perform update and set state to refresh app\n          .then(id => personService \n            .update(id, {\n              name: newName,\n              number: newNumber\n            })\n            .then(response => {\n              setPersons(persons.map(per => per.id !== id ? per : response))\n            })\n          )\n          .then(response => {\n            setMessage({\n              message: `Updated successfully`,\n              style: {\n                border: '3px solid green',\n                color: 'green',\n                marginBottom: '30px'\n              }\n            })\n\n            setTimeout(() => {\n              setMessage({\n                message: null,\n                style: null\n              })\n            }, 5000)\n          })\n          .catch(error => {\n            setMessage({\n              message: `Unsuccessful in updating`,\n              style: {\n                border: '3px solid red',\n                color: 'red',\n                marginBottom: '30px'\n              }\n            })\n\n            setTimeout(() => {\n              setMessage({\n                message: null,\n                style: null\n              })\n            }, 5000)\n          })\n      }\n\n    } else {\n      // Post the person to the server and update the app's state\n      personService\n        .create({\n          name: newName,\n          number: newNumber\n        })\n        .then(response => {\n          setPersons([\n            ...persons,\n            response\n          ])\n        })\n        .then(response => {\n          setMessage({\n            message: `Added successfully`,\n            style: {\n              border: '3px solid green',\n              color: 'green',\n              marginBottom: '30px'\n            }\n          })\n\n          setTimeout(() => {\n            setMessage({\n              message: null,\n              style: null\n            })\n          }, 5000)\n        })\n        .catch(error => {\n          setMessage({\n            message: `Unsuccessful in adding`,\n            style: {\n              border: '3px solid red',\n              color: 'red',\n              marginBottom: '30px'\n            }\n          })\n\n          setTimeout(() => {\n            setMessage({\n              message: null,\n              style: null\n            })\n          }, 5000)\n        })\n    }\n\n    // Clear fields\n    setNewName('');\n    setNewNumber('');\n\n  }\n\n  const fullDeleteHandle = (id) => {\n    const userConfirm = window.confirm(`Do you really want to delete person ${id}?`);\n\n    if (userConfirm) {\n      personService\n      .handleDelete(id)\n      .then(() => {\n        // Re-GET persons to refresh the app\n        personService\n        .getAll()\n        .then(response => {\n          setPersons(response)\n        })\n      })\n      .then(response => {\n        setMessage({\n          message: `Deleted successfully`,\n          style: {\n            border: '3px solid green',\n            color: 'green',\n            marginBottom: '30px'\n          }\n        })\n\n        setTimeout(() => {\n          setMessage({\n            message: null,\n            style: null\n          })\n        }, 5000)\n      })\n      .catch(error => {\n        setMessage({\n          message: `Unsuccessful in deleting`,\n          style: {\n            border: '3px solid red',\n            color: 'red',\n            marginBottom: '30px'\n          }\n        })\n\n        setTimeout(() => {\n          setMessage({\n            message: null,\n            style: null\n          })\n        }, 5000)\n      });\n    } else {\n      return\n    }\n  }\n\n  let personsToShow = []; \n  if (filter === '') {\n    personsToShow = persons;\n  } else {\n    personsToShow = persons\n      .filter((per) => per.name\n                        .toLowerCase()\n                        .includes(filter.toLowerCase()))\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message.message} style={message.style} />\n      <Filter filter={filter} changeFilterHandler={changeFilterHandler} />\n      <AddNewPerson submitHandler={submitHandler} newName={newName} changeHandler={changeHandler} newNumber={newNumber} changeNumberHandler={changeNumberHandler} />\n      <h2>Numbers</h2>\n      {\n        personsToShow\n          .map((per) => <p key={per.name + per.number}>{per.name} {per.number} <button onClick={() => fullDeleteHandle(per.id)}>Delete</button></p>)\n      }\n    </div>\n  )\n}\n\nexport default App","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}